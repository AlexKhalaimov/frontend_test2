!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("window")):"function"==typeof define&&define.amd?define(["window"],t):"object"==typeof exports?exports.NiceSelect=t(require("window")):e.NiceSelect=t(e.window)}(this,(function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),function(e){function o(e){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}function i(e){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),e.dispatchEvent(t)}function s(e,t){return e.getAttribute(t)}function r(e,t){return!!e&&e.classList.contains(t)}function c(e,t){if(e)return e.classList.add(t)}function l(e,t){if(e)return e.classList.remove(t)}n.d(t,"bind",(function(){return u})),n(2);var a={data:null,searchable:!1};function d(e,t){this.el=e,this.config=Object.assign({},a,t||{}),this.data=this.config.data,this.selectedOptions=[],this.placeholder=s(this.el,"placeholder")||this.config.placeholder||"Select an option",this.dropdown=null,this.multiple=s(this.el,"multiple"),this.disabled=s(this.el,"disabled"),this.create()}function u(e,t){return new d(e,t)}d.prototype.create=function(){this.el.style.display="none",this.data?this.processData(this.data):this.extractData(),this.renderDropdown(),this.bindEvent()},d.prototype.processData=function(e){var t=[];e.forEach((function(e){t.push({data:e,attributes:{selected:!1,disabled:!1}})})),this.options=t},d.prototype.extractData=function(){var e=[],t=[],n=[];this.el.querySelectorAll("option").forEach((function(n){var o={text:n.innerText,value:n.value},i={selected:null!=n.getAttribute("selected"),disabled:null!=n.getAttribute("disabled")};e.push(o),t.push({data:o,attributes:i})})),this.data=e,this.options=t,this.options.forEach((function(e){e.attributes.selected&&n.push(e)})),this.selectedOptions=n},d.prototype.renderDropdown=function(){var e=["nice-select",s(this.el,"class")||"",this.disabled?"disabled":"",this.multiple?"has-multiple":""],t='<div class="'.concat(e.join(" "),'" tabindex="').concat(this.disabled?null:0,'">\n  <span class="').concat(this.multiple?"multiple-options":"current",'"></span>\n  <div class="nice-select-dropdown">\n  ').concat(this.config.searchable?'<div class="nice-select-search-box">\n<input type="text" class="nice-select-search" placeholder="Search..."/>\n</div>':"",'\n  <ul class="list"></ul>\n  </div></div>\n');this.el.insertAdjacentHTML("afterend",t),this.dropdown=this.el.nextElementSibling,this._renderSelectedItems(),this._renderItems()},d.prototype._renderSelectedItems=function(){if(this.multiple){var e="";this.selectedOptions.forEach((function(t){e+='<span class="current">'.concat(t.data.text,"</span>")})),e=""==e?this.placeholder:e,this.dropdown.querySelector(".multiple-options").innerHTML=e}else{var t=this.selectedOptions.length>0?this.selectedOptions[0].data.text:this.placeholder;this.dropdown.querySelector(".current").innerHTML=t}},d.prototype._renderItems=function(){var e=this,t=this.dropdown.querySelector("ul");this.options.forEach((function(n){t.appendChild(e._renderItem(n))}))},d.prototype._renderItem=function(e){var t,n=document.createElement("li");n.setAttribute("data-value",e.data.value);var o=["option",e.attributes.selected?"selected":null,e.attributes.disabled?"disabled":null];return(t=n.classList).add.apply(t,o),n.innerHTML=e.data.text,n.addEventListener("click",this._onItemClicked.bind(this,e)),e.element=n,n},d.prototype.update=function(){if(this.extractData(),this.dropdown){var e=r(this.dropdown,"open");this.dropdown.parentNode.removeChild(this.dropdown),this.create(),e&&o(this.dropdown)}},d.prototype.disable=function(){this.disabled||(this.disabled=!0,c(this.dropdown,"disabled"))},d.prototype.enable=function(){this.disabled&&(this.disabled=!1,l(this.dropdown,"disabled"))},d.prototype.clear=function(){this.selectedOptions=[],this._renderSelectedItems(),this.updateSelectValue(),i(this.el)},d.prototype.destroy=function(){this.dropdown&&(this.dropdown.parentNode.removeChild(this.dropdown),this.el.style.display="")},d.prototype.bindEvent=function(){this.dropdown.addEventListener("click",this._onClicked.bind(this)),this.dropdown.addEventListener("keydown",this._onKeyPressed.bind(this)),e.addEventListener("click",this._onClickedOutside.bind(this)),this.config.searchable&&this._bindSearchEvent()},d.prototype._bindSearchEvent=function(){var e=this.dropdown.querySelector(".nice-select-search");e&&e.addEventListener("click",(function(e){return e.stopPropagation(),!1})),e.addEventListener("input",this._onSearchChanged.bind(this))},d.prototype._onClicked=function(e){if(this.dropdown.classList.toggle("open"),this.dropdown.classList.contains("open")){var t=this.dropdown.querySelector(".nice-select-search");t&&(t.value="",t.focus());var n=this.dropdown.querySelector(".focus");l(n,"focus"),c(n=this.dropdown.querySelector(".selected"),"focus"),this.dropdown.querySelectorAll("ul li").forEach((function(e){e.style.display=""}))}else this.dropdown.focus()},d.prototype._onItemClicked=function(e,t){var n=t.target;r(n,"disabled")||(this.multiple?r(n,"selected")||(c(n,"selected"),this.selectedOptions.push(e)):(this.selectedOptions.forEach((function(e){l(e.element,"selected")})),c(n,"selected"),this.selectedOptions=[e]),this._renderSelectedItems(),this.updateSelectValue())},d.prototype.updateSelectValue=function(){this.multiple?this.selectedOptions.each((function(e){var t=this.el.querySelector('option[value="'+e.data.value+'"]');t&&t.setAttribute("selected",!0)})):this.selectedOptions.length>0&&(this.el.value=this.selectedOptions[0].data.value),i(this.el)},d.prototype._onClickedOutside=function(e){this.dropdown.contains(e.target)||this.dropdown.classList.remove("open")},d.prototype._onKeyPressed=function(e){var t=this.dropdown.querySelector(".focus"),n=this.dropdown.classList.contains("open");if(32==e.keyCode||13==e.keyCode)o(n?t:this.dropdown);else if(40==e.keyCode){if(n){var i=this._findNext(t);i&&(l(this.dropdown.querySelector(".focus"),"focus"),c(i,"focus"))}else o(this.dropdown);e.preventDefault()}else if(38==e.keyCode){if(n){var s=this._findPrev(t);s&&(l(this.dropdown.querySelector(".focus"),"focus"),c(s,"focus"))}else o(this.dropdown);e.preventDefault()}else 27==e.keyCode&&n&&o(this.dropdown);return!1},d.prototype._findNext=function(e){for(e=e?e.nextElementSibling:this.dropdown.querySelector(".list .option");e;){if(!r(e,"disabled")&&"none"!=e.style.display)return e;e=e.nextElementSibling}return null},d.prototype._findPrev=function(e){for(e=e?e.previousElementSibling:this.dropdown.querySelector(".list .option:last-child");e;){if(!r(e,"disabled")&&"none"!=e.style.display)return e;e=e.previousElementSibling}return null},d.prototype._onSearchChanged=function(e){var t=this.dropdown.classList.contains("open"),n=e.target.value;if(""==(n=n.toLowerCase()))this.options.forEach((function(e){e.element.style.display=""}));else if(t){var o=new RegExp(n);this.options.forEach((function(e){var t=e.data.text.toLowerCase(),n=o.test(t);e.element.style.display=n?"":"none"}))}this.dropdown.querySelectorAll(".focus").forEach((function(e){l(e,"focus")})),c(this._findNext(null),"focus")}}.call(this,n(1))},function(t,n){t.exports=e},function(e,t,n){}])})),window.onload=()=>{!function(){NiceSelect.bind(document.getElementById("categories-select"));const e=document.querySelectorAll(".header-info-item__counter"),t=document.querySelectorAll(".js-tab-btn"),n=document.querySelectorAll(".js-add-cart"),o=document.querySelectorAll(".js-add-favorites"),i=document.querySelectorAll(".js-add-comparsion"),s=document.querySelector(".js-comparsion-counter"),r=document.querySelector(".js-favorites-counter"),c=document.querySelector(".js-cart-counter"),l="В избранном",a="В сравнении",d="В корзине";let u=document.querySelectorAll(".filter-form__select"),p=document.querySelectorAll(".js-tab-content");function h(e){if(!e.target.classList.contains("is-active")){const t=e.target.getAttribute("data-tab"),n=document.querySelector('.js-tab-content[data-content="'+t+'"]'),o=document.querySelector(".js-tab-btn.is-active"),i=document.querySelector(".js-tab-content.is-active");o.classList.remove("is-active"),i.classList.remove("is-active"),e.target.classList.add("is-active"),n.classList.add("is-active")}}function f(e){e.innerText||(e.innerText=0),e.classList.remove("hidden"),e.innerText=1+parseInt(e.innerText),m(this)}function m(e){e.classList.contains("js-add-cart")&&(e.lastElementChild.innerText=d),e.classList.contains("js-add-favorites")&&(e.lastElementChild.innerText=l),e.classList.contains("js-add-comparsion")&&(e.lastElementChild.innerText=a),e.setAttribute("disabled",!0)}u.forEach(e=>{NiceSelect.bind(e)}),e.forEach(e=>{0===e.childNodes.length&&e.classList.add("hidden")}),t.forEach(e=>{e.addEventListener("click",h)}),n.forEach(e=>{e.addEventListener("click",(function(t){f.call(e,c)}))}),o.forEach(e=>{e.addEventListener("click",(function(t){f.call(e,r)}))}),i.forEach(e=>{e.addEventListener("click",(function(t){f.call(e,s)}))});const y=document.querySelector(".overlay"),v=document.body,b=document.querySelector(".popup"),g=document.querySelector(".js-callback-btn"),E=document.querySelector(".js-login-btn"),S=document.querySelector(".js-subscribe-btn"),L=document.querySelector(".popup__inner"),w=document.getElementById("callback-template").content,q=document.getElementById("login-template").content,_=document.getElementById("subscribe-template").content,x=(e,t)=>{k(t);let n=document.importNode(e,!0);t.appendChild(n)},k=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};function j(e){let t=document.querySelector(".js-close-popup");e.target.closest(".js-callback-btn")?(x(w,L),A()):e.target.closest(".js-login-btn")?(x(q,L),A()):e.target.closest(".js-subscribe-btn")&&x(_,L),v.classList.add("body-fixed"),N(y),N(b,"flex"),t.addEventListener("click",C),y.addEventListener("click",C),b.addEventListener("click",(function(e){e.target.classList.contains("popup")&&C()}))}function A(){let e=document.querySelector(".js-popup-submit");const t=document.querySelectorAll('.popup-form input[type="tel"]'),n=document.querySelectorAll(".popup-form .popup-form__input");t&&O(t),n.forEach(e=>{e.addEventListener("focus",(function(t){X(e.parentElement)}))}),e.addEventListener("click",(function(e){K(e)}))}function C(){v.classList.remove("body-fixed"),I(y),I(b)}function O(e){for(const t of e)new T({selector:t,layout:t.dataset.mask})}function T(e){this.el=this.getElement(e.selector),this.el&&(this.layout=e.layout||"+38 (0__) ___-__-__",this.maskreg=this.getRegexp(),this.setListeners())}function I(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}()}function N(e,t){e.style.opacity=0,e.style.display=t||"block",function t(){var n=parseFloat(e.style.opacity);(n+=.1)>1||(e.style.opacity=n,requestAnimationFrame(t))}()}g.addEventListener("click",j),E.addEventListener("click",j),T.prototype.getRegexp=function(){var e=this.layout.replace(/_/g,"\\d");return e=(e=(e=(e=e.replace(/\(/g,"\\(")).replace(/\)/g,"\\)")).replace(/\+/g,"\\+")).replace(/\s/g,"\\s")},T.prototype.mask=function(e){var t=e.target,n=this.layout,o=0,i=n.replace(/\D/g,""),s=t.value.replace(/\D/g,""),r;(i.length>=s.length&&(s=i),t.value=n.replace(/./g,(function(e){return/[_\d]/.test(e)&&o<s.length?s.charAt(o++):o>=s.length?"":e})),"blur"==e.type)?new RegExp(this.maskreg).test(t.value)||J(e.target.parentElement,B.phone):this.setCursorPosition(t.value.length,t)},T.prototype.setCursorPosition=function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},T.prototype.setListeners=function(){this.el.addEventListener("input",this.mask.bind(this),!1),this.el.addEventListener("focus",this.mask.bind(this),!1),this.el.addEventListener("blur",this.mask.bind(this),!1)},T.prototype.getElement=function(e){if(void 0===e)return!1;if(this.isElement(e))return e;if("string"==typeof e){var t=document.querySelector(e);if(this.isElement(t))return t}return!1},T.prototype.isElement=function(e){return e instanceof Element||e instanceof HTMLDocument};const D=undefined;function M(e){const t=e.target.closest(".filter-form");let n=t.querySelectorAll("input"),o=t.querySelectorAll(".nice-select");n.forEach(e=>{e.value=""}),o.forEach(e=>{let t=e.querySelectorAll(".list .option");t.forEach(e=>{e.classList.contains("selected")&&e.classList.remove("selected")}),e.firstElementChild.innerText=t[0].innerText})}document.querySelectorAll(".js-reset-form").forEach(e=>{e.addEventListener("click",M)});const P=document.querySelector(".js-search-btn"),R=document.querySelector(".js-filter-submit"),H=document.querySelectorAll("input"),B={nullLength:"Это поле должно быть заполнено",minLength:"Минимальная длина поля ",email:"Введите корректный email",phone:"Введите корректный телефон",negative:"Некорректно заполнено поле"};let F=[];function V(){F=[];const e=undefined,t=undefined;Q(P.closest(".search-form").querySelector(".search-form__input"),3)}function $(e){F=[];const t=undefined,n=S.closest(".footer-form").querySelector(".footer-form__input");Q(n,3),U(n),0===F.length&&j(e)}function z(e){const t=undefined,n=e.target.closest(".filter-form").querySelectorAll(".filter-form__input");F=[],n.forEach(e=>{W(e)})}function K(e){const t=undefined,n=undefined;Z(e.target.closest(".popup-form").querySelectorAll("input"))}function Z(e){F=[],e.forEach(e=>{switch(e.type){case"tel":case"password":Q(e,7);break;case"email":Q(e,4),U(e)}})}function G(e){var t;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function J(e,t){let n=document.createElement("span");n.classList.add("error-message"),n.innerText=t,e.appendChild(n),F.push(t)}function Q(e,t){let n=e.value.trim();0!==n.length?t&&n.length<t&&J(e.parentElement,`${B.minLength} ${t} символов`):J(e.parentElement,B.nullLength)}function U(e){let t=e.value.trim();t.length>0&&(G(t)||J(e.parentElement,B.email))}function W(e){(0===e.value.replace(/\s/g,"").length||isNaN(e.value)||Math.sign(e.value)<0)&&J(e.parentElement,B.negative)}function X(e){let t=e.querySelectorAll(".error-message");t.length&&t.forEach(t=>{e.removeChild(t)})}P.addEventListener("click",V),S.addEventListener("click",$),R.addEventListener("click",z),H.forEach(e=>{e.addEventListener("focus",(function(e){X(e.target.parentElement)}))});const Y=document.querySelector(".js-open-menu"),ee=document.querySelector(".js-close-menu"),te=document.querySelector(".js-menu");function ne(){v.classList.add("body-fixed"),te.classList.add("menu-open")}function oe(){v.classList.remove("body-fixed"),te.classList.remove("menu-open")}Y.addEventListener("click",ne),ee.addEventListener("click",oe)}()};